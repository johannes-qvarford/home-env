# Tmux Configuration - Optimized for Swedish Keyboard  
# Prefix key: Ctrl-a (easier than default Ctrl-b)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Pane splitting - Swedish keyboard friendly (no Shift required)
unbind '"'
unbind %
bind - split-window -v -c "#{pane_current_path}"  # Horizontal split (panes stacked vertically)
bind + split-window -h -c "#{pane_current_path}"  # Vertical split (panes side by side)

# Window management
bind c new-window -c "#{pane_current_path}"  # Create new window (tab) inheriting current directory

# Arrow key navigation for panes (intuitive)
bind Up select-pane -U
bind Down select-pane -D
bind Left select-pane -L  
bind Right select-pane -R

# Window navigation with Ctrl+Arrow (no Shift required)
bind C-Left previous-window
bind C-Right next-window

# Reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0 (more intuitive)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase history limit
set -g history-limit 10000

# Enable 256 color support
set -g default-terminal "screen-256color"

# Status bar configuration
set -g status-bg black
set -g status-fg white
set -g status-left-length 40
set -g status-left "#[fg=green]Session: #S #[fg=yellow]Window: #I #[fg=cyan]Pane: #P"
set -g status-right "#[fg=magenta]#{b:pane_current_path} #[fg=cyan]%d %b %R"
set -g status-justify centre

# Pane border colors
set -g pane-border-style fg=magenta
set -g pane-active-border-style fg=green

# Window/tab styling - make active tab stand out
setw -g window-status-style fg=white,bg=black
setw -g window-status-current-style fg=white,bg=green,bold

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on

# Window naming - always show base directory name
setw -g automatic-rename on
setw -g automatic-rename-format '#{b:pane_current_path}'

# Quick command execution - prompt for command and run it
bind \; command-prompt -p "Shell command:" "run-shell '%%'"

# Vi-style copy mode navigation
setw -g mode-keys vi

# Swedish keyboard friendly copy mode bindings
bind , copy-mode                                    # Enter copy mode with comma
bind . paste-buffer                                 # Paste with period  
bind -T copy-mode-vi v send-keys -X begin-selection         # Start selection with 'v'
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel  # Copy with 'y' and exit
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle      # Rectangle selection with Ctrl-v

# Windows clipboard integration (WSL)
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "clip.exe"   # Copy to Windows clipboard
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "clip.exe"  # Mouse selection copy
bind v run "powershell.exe -c 'Get-Clipboard' | head -c -2 | tmux load-buffer - && tmux paste-buffer"  # Paste from Windows clipboard with 'v'